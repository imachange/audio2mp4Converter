# Copilot Instructions for audio2mp4Converter

このリポジトリは、音声ファイルと画像ファイルを自動的に結合してMP4動画を作成するPythonツールです。

## プロジェクト概要

**audio2mp4Converter** は、FFmpegを使用して音声ファイル（`audio.*`）と画像ファイル（`cover.*`）を結合し、YouTubeやSNSへのアップロード用のMP4動画を生成するシンプルなコマンドラインツールです。

### 主要な機能
- 音声ファイルと画像ファイルの自動検出（拡張子を問わない）
- 画像サイズの自動調整（奇数サイズ対応）
- クロスプラットフォーム対応（Windows, macOS, Linux）
- 標準ライブラリのみを使用（外部依存なし）

## 技術スタック

- **言語**: Python 3.6+
- **外部ツール**: FFmpeg
- **主要ライブラリ**: 
  - `subprocess` - FFmpegコマンドの実行
  - `pathlib` - ファイルパス操作
  - `sys`, `io` - Windows環境でのUnicode出力対応

## コーディングガイドライン

### 言語とコメント
- **コメント・ドキュメントは日本語で記述してください**
- コード内のメッセージ、print文も日本語を使用
- 絵文字を使った分かりやすい出力メッセージを推奨（例: 📂, 🎵, 🖼️, 🎥, ✅, ❌）

### コーディングスタイル
- Pythonの標準的なPEP 8スタイルガイドに従う
- 変数名は小文字のスネークケース（例: `audio_path`, `output_filename`）
- 定数は大文字のスネークケース（例: `OUTPUT_FILENAME`, `AUDIO_EXTS`）
- わかりやすく簡潔なコードを心がける

### 依存関係の管理
- **外部ライブラリの追加は避けてください**
- Python標準ライブラリのみを使用すること
- FFmpegは外部ツールとして許可されています

### エラーハンドリング
- FFmpegコマンドの実行エラーは適切にキャッチする
- ユーザーにわかりやすいエラーメッセージを表示
- エラー時はユーザーが内容を確認できるように待機する（`input()` を使用）

### Windows互換性
- Windows環境でのUnicode（絵文字）出力に対応すること
- バッチファイル（`.bat`）とPythonスクリプトの両方を維持
- パス操作は `pathlib.Path` を使用してクロスプラットフォーム対応

### ファイル構成
- メインスクリプト: `audio2mp4.py`
- Windows実行用: `audio2mp4.bat`
- ドキュメント: `README.md`（日本語）

## 変更を加える際の注意事項

### 機能追加・変更
- シンプルさを維持すること（過度に複雑にしない）
- 既存の設定エリア（`# ■ 設定エリア`）の構造を維持
- FFmpegのコマンドパラメータを変更する場合は、互換性に注意

### ファイル検出ロジック
- `audio.*` と `cover.*` の命名規則を維持
- 許可する拡張子は `AUDIO_EXTS` と `IMAGE_EXTS` で管理
- 複数のファイルが見つかった場合は最初の1つを使用

### 出力
- デフォルトの出力ファイル名は `movie.mp4`
- ユーザーがわかりやすいメッセージを表示
- 進行状況と結果を明確に示す

## テスト

現在、自動テストは設定されていませんが、以下の点を手動で確認してください：

1. 各プラットフォームでの動作確認（Windows, macOS, Linux）
2. 様々な音声・画像形式での動作確認
3. エラーケースの処理（ファイルが見つからない、FFmpegが未インストールなど）
4. Unicode文字（絵文字）が正しく表示されること

## リソース

- [FFmpeg公式ドキュメント](https://ffmpeg.org/documentation.html)
- [Python pathlib](https://docs.python.org/ja/3/library/pathlib.html)
- [PEP 8 日本語訳](https://pep8-ja.readthedocs.io/)
